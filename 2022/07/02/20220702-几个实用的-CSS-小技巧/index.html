<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="code-dhEpx5xRpv">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.huatree.top","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="分享十五个实用的、防御性 CSS 技能。">
<meta property="og:type" content="article">
<meta property="og:title" content="项目稳定性治理思考：十五个防御性CSS技能">
<meta property="og:url" content="https://www.huatree.top/2022/07/02/20220702-%E5%87%A0%E4%B8%AA%E5%AE%9E%E7%94%A8%E7%9A%84-CSS-%E5%B0%8F%E6%8A%80%E5%B7%A7/index.html">
<meta property="og:site_name" content="醉梦的网络日志">
<meta property="og:description" content="分享十五个实用的、防御性 CSS 技能。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.huatree.top/image-20220703113540863.png">
<meta property="og:image" content="https://cdn.huatree.top/image-20220703112307377.png">
<meta property="og:image" content="https://cdn.huatree.top/image-20220703112924176.png">
<meta property="og:image" content="https://cdn.huatree.top/image-20220703112957839.png">
<meta property="og:image" content="https://cdn.huatree.top/image-20220703113024894.png">
<meta property="og:image" content="https://cdn.huatree.top/image-20220703113103762.png">
<meta property="og:image" content="https://cdn.huatree.top/image-20220703113126092.png">
<meta property="og:image" content="https://cdn.huatree.top/image-20220703113153598.png">
<meta property="og:image" content="https://cdn.huatree.top/image-20220703113215229.png">
<meta property="og:image" content="https://cdn.huatree.top/image-20220703113233112.png">
<meta property="og:image" content="c:/Users/yuhua/AppData/Roaming/Typora/typora-user-images/image-20220703113258300.png">
<meta property="og:image" content="https://cdn.huatree.top/image-20220703113319483.png">
<meta property="article:published_time" content="2022-07-02T03:03:16.000Z">
<meta property="article:modified_time" content="2024-03-11T12:38:02.813Z">
<meta property="article:author" content="醉梦">
<meta property="article:tag" content="CSS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.huatree.top/image-20220703113540863.png">


<link rel="canonical" href="https://www.huatree.top/2022/07/02/20220702-%E5%87%A0%E4%B8%AA%E5%AE%9E%E7%94%A8%E7%9A%84-CSS-%E5%B0%8F%E6%8A%80%E5%B7%A7/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.huatree.top/2022/07/02/20220702-%E5%87%A0%E4%B8%AA%E5%AE%9E%E7%94%A8%E7%9A%84-CSS-%E5%B0%8F%E6%8A%80%E5%B7%A7/","path":"2022/07/02/20220702-几个实用的-CSS-小技巧/","title":"项目稳定性治理思考：十五个防御性CSS技能"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>项目稳定性治理思考：十五个防御性CSS技能 | 醉梦的网络日志</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">醉梦的网络日志</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">最好的状态就是一点点向喜欢的东西靠近</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-开源"><a href="/projects/" rel="section"><i class="fa fa-brands fa-codepen fa-fw"></i>开源</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E6%A6%82%E5%BF%B5%E8%A7%A3%E9%87%8A"><span class="nav-text">一、概念解释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E9%98%B2%E5%BE%A1%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7"><span class="nav-text">二、防御的必要性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E9%98%B2%E5%BE%A1%E6%8A%80%E8%83%BD"><span class="nav-text">三、防御技能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E4%B8%80%EF%BC%9Aflex-wrap"><span class="nav-text">技能一：flex-wrap</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E4%BA%8C%EF%BC%9Amargin-%E9%97%B4%E8%B7%9D"><span class="nav-text">技能二：margin 间距</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E4%B8%89%EF%BC%9A%E9%95%BF%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="nav-text">技能三：长文本处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E5%9B%9B%EF%BC%9A%E9%98%B2%E6%AD%A2%E5%9B%BE%E5%83%8F%E8%A2%AB%E6%8B%89%E4%BC%B8%E6%88%96%E5%8E%8B%E7%BC%A9"><span class="nav-text">技能四：防止图像被拉伸或压缩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E4%BA%94%EF%BC%9A%E9%94%81%E5%AE%9A%E6%BB%9A%E5%8A%A8%E9%93%BE%E6%8E%A5"><span class="nav-text">技能五：锁定滚动链接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8B%93%E5%B1%95"><span class="nav-text">拓展</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#overscroll-behavior-%E5%B1%9E%E6%80%A7%E6%9C%89-3-%E4%B8%AA%E5%80%BC"><span class="nav-text">overscroll-behavior 属性有 3 个值</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E5%85%AD%EF%BC%9ACSS-%E5%8F%98%E9%87%8F%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="nav-text">技能六：CSS 变量默认值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E4%B8%83%EF%BC%9A%E5%BC%B9%E6%80%A7%E5%85%83%E7%B4%A0%E5%B0%BA%E5%AF%B8-min-height-x2F-min-width"><span class="nav-text">技能七：弹性元素尺寸 min-height &#x2F; min-width</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E5%85%AB%EF%BC%9A%E8%A2%AB%E9%81%97%E5%BF%98%E7%9A%84-background-repeat"><span class="nav-text">技能八：被遗忘的 background-repeat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E4%B9%9D%EF%BC%9A%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2-media"><span class="nav-text">技能九：媒体查询 @media</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E5%8D%81%EF%BC%9A%E5%9B%BE%E7%89%87%E4%B8%8A%E7%9A%84%E6%96%87%E5%AD%97"><span class="nav-text">技能十：图片上的文字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E5%8D%81%E4%B8%80%EF%BC%9A%E5%90%88%E7%90%86%E4%BD%BF%E7%94%A8%E6%BB%9A%E5%8A%A8%E6%9D%A1%E5%B1%9E%E6%80%A7"><span class="nav-text">技能十一：合理使用滚动条属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E5%8D%81%E4%BA%8C%EF%BC%9A%E9%A2%84%E7%95%99%E6%BB%9A%E5%8A%A8%E6%9D%A1%E7%A9%BA%E9%97%B4%EF%BC%8C%E9%81%BF%E5%85%8D%E9%87%8D%E6%8E%92"><span class="nav-text">技能十二：预留滚动条空间，避免重排</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E5%8D%81%E4%B8%89%EF%BC%9A%E5%9B%BE%E7%89%87%E6%9C%80%E5%A4%A7%E5%AE%BD%E5%BA%A6"><span class="nav-text">技能十三：图片最大宽度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E5%8D%81%E5%9B%9B%EF%BC%9A%E7%B2%98%E6%80%A7%E5%AE%9A%E4%BD%8D"><span class="nav-text">技能十四：粘性定位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E8%83%BD%E5%8D%81%E4%BA%94%EF%BC%9A%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%80%A7-CSS-%E8%AF%B7%E5%8B%BF%E6%89%B9%E9%87%8F%E5%A4%84%E7%90%86"><span class="nav-text">技能十五：浏览器兼容性 CSS 请勿批量处理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E7%BB%93%E8%AF%AD"><span class="nav-text">四、结语</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="醉梦"
      src="/images/avatar-huatree.jpg">
  <p class="site-author-name" itemprop="name">醉梦</p>
  <div class="site-description" itemprop="description">黎明尚在，未来可戚</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">91</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">86</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/huatree" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;huatree" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://unpkg.com/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://codepen.io/" title="https:&#x2F;&#x2F;codepen.io&#x2F;" rel="noopener" target="_blank">codepen</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://davidwalsh.name/" title="https:&#x2F;&#x2F;davidwalsh.name&#x2F;" rel="noopener" target="_blank">David Walsh</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://simpleprogrammer.com/" title="https:&#x2F;&#x2F;simpleprogrammer.com&#x2F;" rel="noopener" target="_blank">Simple Programmer</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.smashingmagazine.com/2024/08/mastering-typography-in-logo-design/" title="https:&#x2F;&#x2F;www.smashingmagazine.com&#x2F;2024&#x2F;08&#x2F;mastering-typography-in-logo-design&#x2F;" rel="noopener" target="_blank">Smashing Magazine</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.ruanyifeng.com/blog/" title="https:&#x2F;&#x2F;www.ruanyifeng.com&#x2F;blog&#x2F;" rel="noopener" target="_blank">阮一峰的网络日志</a>
        </li>
    </ul>
  </div>


  <div class="links-of-recent-posts site-overview-item animated">
    <div class="links-of-recent-posts-title">
      
      <i class="fa fa-history fa-fw"></i>
      
      最近文章
    </div>
    <ul class="links-of-recent-posts-list">
      
      
        <li class="links-of-recent-posts-item">
          <a href="/2021/05/07/20210507-npm%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8C%85%E5%8F%91%E5%B8%83/" title="2021&#x2F;05&#x2F;07&#x2F;20210507-npm自定义包发布&#x2F;">npm自定义包发布</a>
        </li>
      
        <li class="links-of-recent-posts-item">
          <a href="/2024/09/09/20240909-%E5%BE%AE%E5%89%8D%E7%AB%AF%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/" title="2024&#x2F;09&#x2F;09&#x2F;20240909-微前端那些事儿&#x2F;">微前端那些事儿</a>
        </li>
      
        <li class="links-of-recent-posts-item">
          <a href="/2022/12/03/20221203-uniapp%E5%BC%80%E5%8F%91%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/" title="2022&#x2F;12&#x2F;03&#x2F;20221203-uniapp开发问题汇总&#x2F;">uniapp开发问题汇总</a>
        </li>
      
        <li class="links-of-recent-posts-item">
          <a href="/2023/05/25/20230525-%E7%90%86%E8%A7%A3%E9%97%AD%E5%8C%85%E4%B8%8E%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F/" title="2023&#x2F;05&#x2F;25&#x2F;20230525-理解闭包与内存泄漏&#x2F;">理解闭包与内存泄漏</a>
        </li>
      
        <li class="links-of-recent-posts-item">
          <a href="/2024/03/31/20240331-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B9%8BmacOS/" title="2024&#x2F;03&#x2F;31&#x2F;20240331-前端开发环境之macOS&#x2F;">前端开发环境之macOS</a>
        </li>
      
    </ul>
  </div>


        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.huatree.top/2022/07/02/20220702-%E5%87%A0%E4%B8%AA%E5%AE%9E%E7%94%A8%E7%9A%84-CSS-%E5%B0%8F%E6%8A%80%E5%B7%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-huatree.jpg">
      <meta itemprop="name" content="醉梦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="醉梦的网络日志">
      <meta itemprop="description" content="黎明尚在，未来可戚">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="项目稳定性治理思考：十五个防御性CSS技能 | 醉梦的网络日志">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          项目稳定性治理思考：十五个防御性CSS技能
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 11:03:16" itemprop="dateCreated datePublished" datetime="2022-07-02T11:03:16+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-03-11 20:38:02" itemprop="dateModified" datetime="2024-03-11T20:38:02+08:00">2024-03-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BB%8F%E5%85%B8%E6%96%87%E7%AB%A0/" itemprop="url" rel="index"><span itemprop="name">经典文章</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>6.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>分享十五个实用的、防御性 CSS 技能。</p>
<p><img src="https://cdn.huatree.top/image-20220703113540863.png" alt="image-20220703113540863"></p>
<span id="more"></span>

<div class="note info"><p>文章转载自<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzkyODA5ODg4OA==&mid=2247488899&idx=1&sn=01ad1dde0d63a12ac1fd7b010f5a366b&chksm=c21caaa4f56b23b226145dc0a5e91d479526214b3aaa739df42b3640170685d74e9ae4bcd903&mpshare=1&srcid=0703YxH7a7zrC9G2nJVnoJBs&sharer_sharetime=1656817674425&sharer_shareid=ee63f9cc3c108d8b07d5b171a48e9891&from=singlemessage&scene=1&subscene=10000&clicktime=1656817690&enterid=1656817690&sessionid=0&ascene=1&fasttmpl_type=0&fasttmpl_fullversion=6222624-zh_CN-zip&fasttmpl_flag=0&realreporttime=1656817690306&devicetype=android-31&version=2800183b&nettype=WIFI&abtest_cookie=AAACAA==&lang=zh_CN&exportkey=A44JAsslh6QTRh47qfhHNlA=&pass_ticket=r6uOcYCofI/pAlq8Ls6MSJjk0gcjwuGDE8lh7pUHtIT8YS7sA7UbZanJ7GdzeIfe&wx_header=3">前端进阶指南</a></p>
</div>

<h2 id="一、概念解释"><a href="#一、概念解释" class="headerlink" title="一、概念解释"></a>一、概念解释</h2><p>防御性 CSS，防的是谁？我把他总结为：一切使表现和行为偏离预期效果的情景。出现这些场景的原因是因为终端环境的多样化，开发及测试用例只能覆盖大多数使用场景，在其他环境下，解析机制差异、内容动态变化等，都是导致非预期效果的原因。</p>
<h2 id="二、防御的必要性"><a href="#二、防御的必要性" class="headerlink" title="二、防御的必要性"></a>二、防御的必要性</h2><p>防御性 CSS 不仅仅是为了兼容其他少数场景，避免边界情况，更大的价值在于提升团队协作的可能性。防御性 CSS 的意义类似 JS 中的 try…catch, 他可能无法缩短需求开发的时间，但却是你程序正确运行和稳定运行的最后一道防线，更何况 JS 的错误只有在用户交互后才有感知，而 CSS 一旦出错，直接赤裸裸的展现在用户面前，直接影响用户的使用率和留存率。</p>
<p>都说编程风格分为三种：能跑就行风格、中规中矩风格、锦上添花风格。能跑就行风格代表的是：每一个设定和判断都和当次需求贴合的严丝合缝，如同山羊走钢丝，摇摇欲坠，但就是不倒，不得不令人称奇，但这种风格，不仅对编程人员要求极高，而且十分不利于团队协作，一旦意料意外的情景发生或者需求变更，带来的是雪崩式的改动；中规中矩风格概述为，该写注释的地方写注释，该写思路的地方写自己这么做的理由，该兜底处理的地方做拦截处理，程序的鲁棒性和可维护性直接拉满；万无一失风格更多的像是处女座，追求极致和完美，在中规中矩风格上再增一抹亮色，年轻时候的“雷布斯”就是典型代表。防御性 CSS 的目的就是从技术上尽可能的改变编程者能跑就行的侥幸心理，提升项目的可用性和可维护性。其目的也可以归纳为让你的项目做到：跑起来不出错，改起来不骂人。</p>
<p>防御性 CSS 的作用是对常规 CSS 的兜底，是实现项目稳定性建设重要但极其容易被忽视的一环。</p>
<h2 id="三、防御技能"><a href="#三、防御技能" class="headerlink" title="三、防御技能"></a>三、防御技能</h2><h3 id="技能一：flex-wrap"><a href="#技能一：flex-wrap" class="headerlink" title="技能一：flex-wrap"></a>技能一：flex-wrap</h3><p><strong>属性背景</strong>：flex-wrap 是 flex 布局中的属性，其作用是控制 flex 容器内元素所占空间超出 flex 容器空间时是否折行。</p>
<p><strong>防御原因</strong>：flex-wrap 属性默认是不折行，容易忽略多元素溢出兜底；为兜底，请设置 flex-wrap: wrap;</p>
<p><strong>意外后果</strong>：内部元素被裁剪，或 flex 容器出现滚动条；</p>
<p><strong>应用场景</strong>：</p>
<p>1）开发中 flex 容器空间够用，但小尺寸屏幕会溢出；</p>
<p>2）内容由服务端下发，元素个数无法提前预支，超于预期时导致 flex 容器出现滚动条或内部元素被裁剪；</p>
<p>代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.options-list</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>场景示例：</p>
<p><img src="https://cdn.huatree.top/image-20220703112307377.png" alt="image-20220703112307377"></p>
<h3 id="技能二：margin-间距"><a href="#技能二：margin-间距" class="headerlink" title="技能二：margin 间距"></a>技能二：margin 间距</h3><p><strong>属性背景</strong>：margin 作用是调整元素的外边距。用于指定元素与周围空间的距离关系。</p>
<p><strong>防御原因</strong>：防止元素与元素之间挤压空间，造成重叠等情况；</p>
<p><strong>意外后果</strong>：元素重叠或被挤压；</p>
<p><strong>应用场景</strong>：</p>
<p>1）内容所占空间无法保证与其他元素不存在挤压的场景；</p>
<p>代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.section__title</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>场景示例：</p>
<p><img src="https://cdn.huatree.top/image-20220703112924176.png" alt="image-20220703112924176"></p>
<h3 id="技能三：长文本处理"><a href="#技能三：长文本处理" class="headerlink" title="技能三：长文本处理"></a>技能三：长文本处理</h3><p><strong>背景</strong>：当文本长度超出容器时，该如何显示。</p>
<p><strong>意外后果</strong>：文本折行，样式不统一；</p>
<p><strong>应用场景</strong>：</p>
<p>1）要求列表表现一致但文本长度不可控；</p>
<p>此处假设与设计最终商定，超出部分以省略显示，那么，意外兜底的样式代码为：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.username</span> &#123;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>场景示例：</p>
<p><img src="https://cdn.huatree.top/image-20220703112957839.png" alt="image-20220703112957839"></p>
<h3 id="技能四：防止图像被拉伸或压缩"><a href="#技能四：防止图像被拉伸或压缩" class="headerlink" title="技能四：防止图像被拉伸或压缩"></a>技能四：防止图像被拉伸或压缩</h3><p><strong>背景</strong>：通常，服务器下发的图片尺寸以及用户自定义上传的图片，显示在页面时，不可能百分百与容器尺寸贴合，不可避免的会遇到图片的放缩处理。</p>
<p><strong>意外后果</strong>：图像被拉伸或压缩；</p>
<p><strong>应用场景</strong>：</p>
<p>1）服务端下发多种不确定尺寸的图片；</p>
<p>2）用户自定义上传图片且需要预览和编辑；</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card__thumb</span> &#123;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>demo 链接：<a target="_blank" rel="noopener" href="https://monageju.github.io/Blog/object_fit.html">https://monageju.github.io/Blog/object_fit.html</a></p>
<p>场景示例：</p>
<p><img src="https://cdn.huatree.top/image-20220703113024894.png" alt="image-20220703113024894"></p>
<h3 id="技能五：锁定滚动链接"><a href="#技能五：锁定滚动链接" class="headerlink" title="技能五：锁定滚动链接"></a>技能五：锁定滚动链接</h3><p><strong>背景</strong>：overscroll-behavior 是 overscroll-behavior-x 和 overscroll-behavior-y 的简写属性，它控制的是元素滚动到边界时的表现。换个能听得懂的说法：在 JS 世界里，有事件冒泡机制，你可以通过 event 的 stopPropagation 方法去阻止冒泡的发生，同样，在 CSS 世界里，滚动也有冒泡机制，当内部元素滚动到边界时，如果继续滚动，会带动外层祖先元素发生滚动，这种现象被称为滚动链，为了方便记忆，你也可以把他形象的记忆为滚动冒泡。而 overscroll-behavior 这个属性，就是类似 event 的 stopPropagation 方法阻止冒泡事件一样，提供给开发者去控制内层元素是否可以发生”冒泡“带动外层元素滚动的属性。</p>
<p><strong>意外后果</strong>：”滚动冒泡“ 或 ”滚动穿透“；</p>
<p><strong>应用场景</strong>：</p>
<p>1）页面存在多层滚动元素，需要单独控制每层滚动是否引起外层滚动；</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">  overscroll-behavior-y: contain;</span><br><span class="line">  <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>demo 链接：<a target="_blank" rel="noopener" href="https://monageju.github.io/Blog/overscroll_behavior.html">https://monageju.github.io/Blog/overscroll_behavior.html</a></p>
<p>场景示例：如 demo 链接示例</p>
<h4 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h4><p>理解了 overscroll-behavior 属性的作用，现在我们来看点拓展的东西：</p>
<p>首先来看下 overscroll-behavior 的属性值有哪些：</p>
<h5 id="overscroll-behavior-属性有-3-个值"><a href="#overscroll-behavior-属性有-3-个值" class="headerlink" title="overscroll-behavior 属性有 3 个值"></a>overscroll-behavior 属性有 3 个值</h5><p>auto - 默认。元素的滚动会传播给祖先元素。</p>
<p>contain - 阻止滚动链接。滚动不会传播给祖先，但会显示元素内的原生效果。例如，Android 上的炫光效果或 iOS 上的回弹效果，当用户触摸滚动边界时会通知用户。注意：overscroll-behavior: contain 在 html 元素上使用可防止滚动导航操作。</p>
<p>none - 和 contain 一样，但它也可以防止节点本身的滚动效果（例如 Android 炫光或 iOS 回弹）。</p>
<p>这里有两个效果：一是下拉刷新，二是炫光回弹，这里有个 demo 可以看到具体效果：链接传送门</p>
<p>下拉刷新是原生支持的功能，如果项目要求自定义下拉刷新效果，除了要考虑如何实现自定义，还要考虑如何去掉默认原生下拉刷新，否则就会出现两个并存的下拉刷新，而去掉原生的下拉刷新也很简单，只需要在 body 或 html 元素添加如下代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="comment">/* 禁用滚动冒泡,但是依然可以进行下拉刷新和炫光和回弹效果以及滑动导航 */</span></span><br><span class="line">  overscroll-behavior-y: contain;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>至于禁用炫光和回弹效果，其实是应用 overscroll-behavior 属性的 none 属性值，具体代码如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="comment">/* 禁用默认的下拉刷新和炫光和回弹效果,但是依然可以进行滑动导航 */</span></span><br><span class="line">  overscroll-behavior-y: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>除了上述描述的两个效果，其实还有一个效果：手势导航,如左滑退出及右滑前进功能；而如果要禁用手势导航，可以使用如下代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="comment">/* 禁用滑动导航 */</span></span><br><span class="line">  overscroll-behavior-x: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="技能六：CSS-变量默认值"><a href="#技能六：CSS-变量默认值" class="headerlink" title="技能六：CSS 变量默认值"></a>技能六：CSS 变量默认值</h3><p><strong>背景</strong>：CSS 变量可以实现动态控制元素属性，但是当 CSS 变量未定义或无效时，造成变量值异常，此时，元素的样式将会脱离预期，而变量默认值可以实现异常兜底，保证变量值异常时页面依然能运行。需要额外说明的是，备用值并不是用于实现浏览器兼容性的。如果浏览器不支持 CSS 自定义属性，备用值也没什么用。它仅对支持 CSS 自定义属性的浏览器提供了一个备份机制，该机制仅当给定值未定义或是无效值的时候生效，函数的第一个参数是自定义属性的名称。如果提供了第二个参数，则表示备用值，当自定义属性值无效时生效。</p>
<p><strong>意外后果</strong>：因失去宽高等变量值而不显示或变形；</p>
<p><strong>应用场景</strong>：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--my-var, red); <span class="comment">/* Red if --my-var is not defined */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="技能七：弹性元素尺寸-min-height-x2F-min-width"><a href="#技能七：弹性元素尺寸-min-height-x2F-min-width" class="headerlink" title="技能七：弹性元素尺寸 min-height &#x2F; min-width"></a>技能七：弹性元素尺寸 min-height &#x2F; min-width</h3><p><strong>背景</strong>：当需求要求完整展示某个列表数据，但列表数据所占空间无法固定时，为避免部分内容过宽、过高突破固定空间破坏布局，可以使用弹性尺寸 <code>min-_</code> 或者 <code>max-_</code> , 这样能自动适应部分内容所占空间过大或过小带来的样式美观问题；</p>
<p><strong>意外后果</strong>：占用空间过大或过小，破坏布局或不美观；</p>
<p><strong>应用场景</strong>：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hero</span> &#123;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">350px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>场景示例：</p>
<p><img src="https://cdn.huatree.top/image-20220703113103762.png" alt="image-20220703113103762"></p>
<p>max-width 的使用场景：</p>
<p>如果对每一个元素使用固定的 width,则当内容空间大于容器尺寸时，将发生溢出，此时，需要使用 min-width 限制最小宽度，当超出尺寸时，能够实现自动适配。</p>
<h3 id="技能八：被遗忘的-background-repeat"><a href="#技能八：被遗忘的-background-repeat" class="headerlink" title="技能八：被遗忘的 background-repeat"></a>技能八：被遗忘的 background-repeat</h3><p><strong>背景</strong>：使用图片作为容器的背景图，当容器的尺寸大于图片尺寸时，默认背景图会重复，如果你在开发中忽略了上述问题，则会出现背景图重复的问题；</p>
<p>场景示例：</p>
<p><img src="https://cdn.huatree.top/image-20220703113126092.png" alt="image-20220703113126092"></p>
<p><strong>解决办法</strong>：</p>
<p>代码如下 ：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;..&#x27;</span>);</span><br><span class="line"><span class="attribute">background-repeat</span>: no-repeat;</span><br></pre></td></tr></table></figure>

<p><strong>解决后效果：</strong></p>
<p><img src="https://cdn.huatree.top/image-20220703113153598.png" alt="image-20220703113153598"></p>
<h3 id="技能九：媒体查询-media"><a href="#技能九：媒体查询-media" class="headerlink" title="技能九：媒体查询 @media"></a>技能九：媒体查询 @media</h3><p><strong>背景</strong>：媒体查询的使用更像是 CSS 中的条件判断，它会根据你定义的条件，当条件满足时，条件内的样式生效；</p>
<p><strong>举例</strong>：当屏幕的宽度小于 600px 时，body 背景色为红色；当屏幕宽度介于 600-800px 之间时，body 背景色为黄色；当屏幕宽度大于 800px 时，body 的背景色为蓝色；</p>
<p><strong>示例代码</strong>：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 将 body 的背景色设置为蓝色 */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 在小于或等于 800 像素的屏幕上，将背景色设置为黄色 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">800px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 在 600 像素或更小的屏幕上，将背景色设置为红色 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">600px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>demo 链接如下：<a target="_blank" rel="noopener" href="https://monageju.github.io/Blog/media.html">https://monageju.github.io/Blog/media.html</a></p>
<h3 id="技能十：图片上的文字"><a href="#技能十：图片上的文字" class="headerlink" title="技能十：图片上的文字"></a>技能十：图片上的文字</h3><p><strong>背景</strong>：当需要在图片上层展示文字时，如果图片加载失败，而外层容器的背景色和文字颜色接近，那么文字的展示效果就不理想；</p>
<p><strong>举例</strong>：容器背景设置为黑色，图片为橙色，文字颜色为近黑色，当图片加载失败时，文字的背景色直接变为容器的背景色，文字与容器背景色重合，示例如下；</p>
<p><strong>解决后效果：</strong></p>
<p><img src="https://cdn.huatree.top/image-20220703113215229.png" alt="image-20220703113215229"></p>
<p><strong>解决代码：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card__img</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>至此，即使图片加载失败，图片上的问题依然可以正常显示；至于图片加载失败时左上角的“破图”标记，可以使用伪类进行遮挡美化；</p>
<h3 id="技能十一：合理使用滚动条属性"><a href="#技能十一：合理使用滚动条属性" class="headerlink" title="技能十一：合理使用滚动条属性"></a>技能十一：合理使用滚动条属性</h3><p><strong>背景</strong>：当容器的空间固定时，如果内容超出容器，为正常显示完所有内容，同时不扩展所占空间，会使用 overflow 属性控制超出部分自动滚动展示，同时给与滚动条样式提示有剩余内容，但如果该属性使用不当，会造成样式很难看；</p>
<p><strong>举例</strong>：overflow 属性有两个作用很相近的属性值，一个是 scroll, 另一个是 auto; 这两个属性值都能实现当内容大于所占空间时滚动展示，不同点在于使用 scroll 属性无论内容是否超出容器空间，都会展示滚动条，而 auto 属性会分辩条件，内容超出时才会展示滚动条，为超出时则会自动隐藏，样式上较为美观；</p>
<p><strong>解决代码：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>场景示例：</p>
<p><img src="https://cdn.huatree.top/image-20220703113233112.png" alt="image-20220703113233112"></p>
<h3 id="技能十二：预留滚动条空间，避免重排"><a href="#技能十二：预留滚动条空间，避免重排" class="headerlink" title="技能十二：预留滚动条空间，避免重排"></a>技能十二：预留滚动条空间，避免重排</h3><p><strong>背景</strong>：接技能十一，当我们正确使用了 overflow:auto 就万事大吉了吗？也不尽然。</p>
<p>设想这样一个场景：有一个宽度 100vw，高度为 100vh 的容器盒子，容器内展示商品卡片，滑动到页面底部时，触发滑动加载，当触发懒加载时，容器内商品卡片占用的高度已经超出 100vh，依据外层容器设置的 overflow:auto，内容超出时会展示滚动条，滚动条的出现，使得页面不得不给滚动条让出一定的宽度，这个切换的场景中，由于不得不给滚动条让位置，最外层的元素发生了元素宽度变化，产生了重排的效果，有没有可能避免这一次不必要的重排呢？答案是有的。</p>
<p>大家一定还记得 vue 的指令中有两个很相像的指令 v-if 和 v-show, 他们俩的原理和区别是什么？分别用在什么情景下？提醒到这，是不是有思路了？如果还没有，那也没关系，再提示一点点，既然要避免多余的一次重排，而滑动加载又不可避免，如果我一开始就预留好滚动条的位置，只是你看不见，到了滚动条应该出场的时候再让你看见，是不是就能避免不必要的重排了呢？现在再想想，这是不是就是 v-show 指令的设计原理？</p>
<p>CSS 中有一个 scrollbar-gutter 属性，当它的值设置为 stable 时，就能够实现上述的这种功能，代码如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">scrollbar-gutter</span>: stable;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>举例</strong>：</p>
<p>内容较短时预留滚动条空间，内容超出时显示滚动条；</p>
<p><img src="C:\Users\yuhua\AppData\Roaming\Typora\typora-user-images\image-20220703113258300.png" alt="image-20220703113258300"></p>
<h3 id="技能十三：图片最大宽度"><a href="#技能十三：图片最大宽度" class="headerlink" title="技能十三：图片最大宽度"></a>技能十三：图片最大宽度</h3><p><strong>背景</strong>：当给固定宽高容器设置背景图时，如果背景图尺寸超过容器宽高，图片会溢出，因此，最好在项目的 resetCss 中按照以下属性属性初始化：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>实例：</strong></p>
<p><img src="https://cdn.huatree.top/image-20220703113319483.png" alt="image-20220703113319483"></p>
<h3 id="技能十四：粘性定位"><a href="#技能十四：粘性定位" class="headerlink" title="技能十四：粘性定位"></a>技能十四：粘性定位</h3><p><strong>说明</strong>：position 的粘性定位指的是通过用户的滚动，元素的 position 属性在 position:relative 与 position:fixed 定位之间切换；这对于需要使用滚动吸顶的场景非常方便；是典型的依据业务场景推动 CSS 技术发展的典例；</p>
<h3 id="技能十五：浏览器兼容性-CSS-请勿批量处理"><a href="#技能十五：浏览器兼容性-CSS-请勿批量处理" class="headerlink" title="技能十五：浏览器兼容性 CSS 请勿批量处理"></a>技能十五：浏览器兼容性 CSS 请勿批量处理</h3><p><strong>说明</strong>：根据 W3C 标准，批量分组选择选择器，如果分组中，其中一个无效，那么整个选择器都将会失效。因此，在遇到浏览器兼容属性时，切勿批量组合书写；</p>
<p><strong>实例:</strong></p>
<p>如果是如下书写方式，则该选择器没有任何问题，因为该分组选择器的所有选择器都有效：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span>,</span><br><span class="line"><span class="selector-tag">h2</span>,</span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时，它的作用等同于：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但如果，是下面这种情况就不同了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span>::-webkit-input-placeholder,</span><br><span class="line">input:-moz-placeholder &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#222</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>该选择器使用了分组选择器，在确定的某一个浏览器中，该分组中只有一个选择器有效，而其他选择都是失效状态，根据规则，整个分组选择器都将会失效，因此，正确的做法应该是分开写，代码如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span>::-webkit-input-placeholder &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#222</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span>:-moz-placeholder &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#222</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时，其效果才是符合预期的。</p>
<h2 id="四、结语"><a href="#四、结语" class="headerlink" title="四、结语"></a>四、结语</h2><p>通常一个项目的稳定性指的都是逻辑层稳定和服务层稳定，CSS 是极其容易被忽视的一层；当项目发生线上故障时，逻辑层和服务器可以通过日志查询、抓包等手段定位，而 CSS 问题则只能凭借经验和项目所运行环境进行大致推断，极难快速准确定位问题。在稳定性建设时，CSS 的书写应该遵循“瞻前顾后”的防御性写法，尽可能的避免意外的边界情况，这才是防御性 CSS 的真实价值。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpg" alt="醉梦 微信">
        <span>微信</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>醉梦
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://www.huatree.top/2022/07/02/20220702-%E5%87%A0%E4%B8%AA%E5%AE%9E%E7%94%A8%E7%9A%84-CSS-%E5%B0%8F%E6%8A%80%E5%B7%A7/" title="项目稳定性治理思考：十五个防御性CSS技能">https://www.huatree.top/2022/07/02/20220702-几个实用的-CSS-小技巧/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
        <a target="_blank" class="social-link" href="/images/wechat_channel.jpg">
          <span class="icon">
            <i class="fab fa-weixin"></i>
          </span>

          <span class="label">WeChat</span>
        </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/CSS/" rel="tag"># CSS</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/06/06/20220606-%E7%A7%BB%E5%8A%A8%E7%AB%AFH5%E9%A1%B5%E9%9D%A2%E7%A6%81%E6%AD%A2%E9%95%BF%E6%8C%89%E5%A4%8D%E5%88%B6%E5%8F%8A%E5%8E%BB%E6%8E%89%E7%82%B9%E5%87%BB%E9%AB%98%E4%BA%AE/" rel="prev" title="移动端H5页面禁止长按复制及去掉点击高亮">
                  <i class="fa fa-chevron-left"></i> 移动端H5页面禁止长按复制及去掉点击高亮
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/08/01/20220801-Vue%E4%B8%AD%E4%B8%80%E6%AC%A1%E6%80%A7%E7%9B%91%E5%90%AC%E5%A4%9A%E4%B8%AAdata%E5%80%BC/" rel="next" title="Vue中一次性监听多个data值">
                  Vue中一次性监听多个data值 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">蜀ICP备2022016364号-1 </a>
  </div>

<div class="copyright">
  &copy; 2019 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">醉梦</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">364k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">5:31</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script src="https://unpkg.com/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://unpkg.com/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<link rel="stylesheet" href="https://unpkg.com/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"huatree","repo":"huatree.gitalk.io","client_id":"f058094b28cadc38c8bf","client_secret":"b5259994ff1994db4b3b6124a3fe83fe2e0e9711","admin_user":"huatree","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","id":"location.pathname","js":{"url":"https://unpkg.com/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"1e780053f05aa810d9557fb488691b9e"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
