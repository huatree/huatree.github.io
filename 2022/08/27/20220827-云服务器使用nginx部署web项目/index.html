<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="code-dhEpx5xRpv">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.huatree.top","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="nginx 是一个很强大的高性能Web和反向代理服务。">
<meta property="og:type" content="article">
<meta property="og:title" content="云服务器使用nginx部署web项目">
<meta property="og:url" content="https://www.huatree.top/2022/08/27/20220827-%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BD%BF%E7%94%A8nginx%E9%83%A8%E7%BD%B2web%E9%A1%B9%E7%9B%AE/index.html">
<meta property="og:site_name" content="醉梦的网络日志">
<meta property="og:description" content="nginx 是一个很强大的高性能Web和反向代理服务。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.huatree.top/image-20220828015532132.png">
<meta property="article:published_time" content="2022-08-27T10:57:13.000Z">
<meta property="article:modified_time" content="2024-03-11T12:38:02.814Z">
<meta property="article:author" content="醉梦">
<meta property="article:tag" content="nginx">
<meta property="article:tag" content="部署">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.huatree.top/image-20220828015532132.png">


<link rel="canonical" href="https://www.huatree.top/2022/08/27/20220827-%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BD%BF%E7%94%A8nginx%E9%83%A8%E7%BD%B2web%E9%A1%B9%E7%9B%AE/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.huatree.top/2022/08/27/20220827-%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BD%BF%E7%94%A8nginx%E9%83%A8%E7%BD%B2web%E9%A1%B9%E7%9B%AE/","path":"2022/08/27/20220827-云服务器使用nginx部署web项目/","title":"云服务器使用nginx部署web项目"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>云服务器使用nginx部署web项目 | 醉梦的网络日志</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">醉梦的网络日志</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">最好的状态就是一点点向喜欢的东西靠近</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-简介"><a href="/about/" rel="section"><i class="fa fa-fw fa-vcard fa-fw"></i>简介</a></li><li class="menu-item menu-item-开源"><a href="/projects/" rel="section"><i class="fa fa-brands fa-codepen fa-fw"></i>开源</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-nginx"><span class="nav-text">安装 nginx</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nginx-%E7%9B%AE%E5%BD%95"><span class="nav-text">nginx 目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-text">常用命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#web-%E7%9B%AE%E5%BD%95%E4%B8%8E-sites-enabled"><span class="nav-text">web 目录与 sites-enabled</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sites-available-%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6%E5%B9%B6%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE"><span class="nav-text">sites-available 中自定义文件并部署项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E4%B8%AA%E7%AB%AF%E5%8F%A3%E4%B8%8B%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AA%E9%A1%B9%E7%9B%AE"><span class="nav-text">一个端口下部署多个项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E4%B8%AA%E7%AB%AF%E5%8F%A3%E4%B8%8B%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AA-Vue-%E9%A1%B9%E7%9B%AE"><span class="nav-text">一个端口下部署多个 Vue 项目</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-vue-%E6%96%87%E4%BB%B6"><span class="nav-text">配置 vue 文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-h5-conf"><span class="nav-text">配置 h5.conf</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nginx-%E9%85%8D%E7%BD%AE%E5%B9%B6%E9%BB%98%E8%AE%A4%E8%B7%B3%E8%BD%AC%E5%88%B0-https"><span class="nav-text">nginx 配置并默认跳转到 https</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E9%93%BE%E6%8E%A5"><span class="nav-text">相关链接</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="醉梦"
      src="/images/avatar-huatree.jpg">
  <p class="site-author-name" itemprop="name">醉梦</p>
  <div class="site-description" itemprop="description">黎明尚在，未来可戚</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">90</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">85</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/huatree" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;huatree" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://unpkg.com/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://codepen.io/" title="https:&#x2F;&#x2F;codepen.io&#x2F;" rel="noopener" target="_blank">codepen</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://davidwalsh.name/" title="https:&#x2F;&#x2F;davidwalsh.name&#x2F;" rel="noopener" target="_blank">David Walsh</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://simpleprogrammer.com/" title="https:&#x2F;&#x2F;simpleprogrammer.com&#x2F;" rel="noopener" target="_blank">Simple Programmer</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.smashingmagazine.com/2024/08/mastering-typography-in-logo-design/" title="https:&#x2F;&#x2F;www.smashingmagazine.com&#x2F;2024&#x2F;08&#x2F;mastering-typography-in-logo-design&#x2F;" rel="noopener" target="_blank">Smashing Magazine</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.ruanyifeng.com/blog/" title="https:&#x2F;&#x2F;www.ruanyifeng.com&#x2F;blog&#x2F;" rel="noopener" target="_blank">阮一峰的网络日志</a>
        </li>
    </ul>
  </div>


  <div class="links-of-recent-posts site-overview-item animated">
    <div class="links-of-recent-posts-title">
      
      <i class="fa fa-history fa-fw"></i>
      
      最近文章
    </div>
    <ul class="links-of-recent-posts-list">
      
      
        <li class="links-of-recent-posts-item">
          <a href="/2022/12/03/20221203-uniapp%E5%BC%80%E5%8F%91%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/" title="2022&#x2F;12&#x2F;03&#x2F;20221203-uniapp开发问题汇总&#x2F;">uniapp开发问题汇总</a>
        </li>
      
        <li class="links-of-recent-posts-item">
          <a href="/2023/05/25/20230525-%E7%90%86%E8%A7%A3%E9%97%AD%E5%8C%85%E4%B8%8E%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F/" title="2023&#x2F;05&#x2F;25&#x2F;20230525-理解闭包与内存泄漏&#x2F;">理解闭包与内存泄漏</a>
        </li>
      
        <li class="links-of-recent-posts-item">
          <a href="/2024/03/31/20240331-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B9%8BmacOS/" title="2024&#x2F;03&#x2F;31&#x2F;20240331-前端开发环境之macOS&#x2F;">前端开发环境之macOS</a>
        </li>
      
        <li class="links-of-recent-posts-item">
          <a href="/2024/03/09/20240309-%E9%A1%BE%E6%9D%91%E5%85%AC%E5%9B%AD%E7%9A%84%E6%97%A9%E6%A8%B1/" title="2024&#x2F;03&#x2F;09&#x2F;20240309-顾村公园的早樱&#x2F;">顾村公园的早樱</a>
        </li>
      
        <li class="links-of-recent-posts-item">
          <a href="/2024/02/05/20240205-ssh%E9%93%BE%E6%8E%A5github%E7%AB%AF%E5%8F%A322%E8%A2%AB%E6%8B%92%E7%BB%9D/" title="2024&#x2F;02&#x2F;05&#x2F;20240205-ssh链接github端口22被拒绝&#x2F;">ssh链接github端口22被拒绝</a>
        </li>
      
    </ul>
  </div>


        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.huatree.top/2022/08/27/20220827-%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BD%BF%E7%94%A8nginx%E9%83%A8%E7%BD%B2web%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-huatree.jpg">
      <meta itemprop="name" content="醉梦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="醉梦的网络日志">
      <meta itemprop="description" content="黎明尚在，未来可戚">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="云服务器使用nginx部署web项目 | 醉梦的网络日志">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          云服务器使用nginx部署web项目
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-27 18:57:13" itemprop="dateCreated datePublished" datetime="2022-08-27T18:57:13+08:00">2022-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-03-11 20:38:02" itemprop="dateModified" datetime="2024-03-11T20:38:02+08:00">2024-03-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%88%90%E9%95%BF%E7%BB%8F%E5%8E%86/" itemprop="url" rel="index"><span itemprop="name">成长经历</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>6.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>nginx 是一个很强大的高性能<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Web/150564">Web</a>和<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86">反向代理</a>服务。</p>
<p><img src="https://cdn.huatree.top/image-20220828015532132.png" alt="image-20220828015532132"></p>
<span id="more"></span>

<div class="note primary"><p>本文以百度智能云服务器<code>debian</code>为例，<code>root</code>角色进行操作。非 root 角色，需要<code>sudo &lt;命令&gt;</code>，回车，输入当前用户密码即可执行。</p>
</div>

<h2 id="安装-nginx"><a href="#安装-nginx" class="headerlink" title="安装 nginx"></a>安装 nginx</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列出所有可更新的软件清单命令</span></span><br><span class="line">$ apt update</span><br><span class="line"><span class="comment"># 升级软件包</span></span><br><span class="line">$ apt upgrade</span><br><span class="line"><span class="comment"># 安装nginx</span></span><br><span class="line">$ apt install nginx</span><br><span class="line"><span class="comment"># 查下版本，确认安装成功</span></span><br><span class="line">$ nginx -v</span><br><span class="line">nginx version: nginx/1.10.3</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Tips</p>
<p>nginx 版本不同，目录可能存在一些差异</p>
</blockquote>
<h2 id="nginx-目录"><a href="#nginx-目录" class="headerlink" title="nginx 目录"></a>nginx 目录</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ whereis nginx</span><br><span class="line">$ <span class="built_in">cd</span> /etc/nginx</span><br><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">conf.d  fastcgi_params  koi-win  modules-available  nginx.conf    scgi_params   sites-enabled  uwsgi_params</span><br><span class="line">fastcgi.conf  koi-utf     mime.types  modules-enabled    proxy_params  sites-available  snippets   win-utf</span><br></pre></td></tr></table></figure>

<p>其中，<code>/etc/nginx/nginx.conf</code>为主配置文件，<code>sites-avaiable</code>主要用户配置 server 端。</p>
<p>执行文件：<code>/usr/sbin/nginx</code></p>
<p>web 目录：<code>/var/www</code></p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 停止nginx</span></span><br><span class="line">$ /etc/init.d/nginx stop</span><br><span class="line"><span class="comment"># 启动nginx</span></span><br><span class="line">$ /etc/init.d/nginx start</span><br><span class="line"><span class="comment"># 服务状态</span></span><br><span class="line">$ /etc/init.d/nginx status</span><br><span class="line"><span class="comment"># 重新载入配置文件</span></span><br><span class="line">$ /etc/init.d/nginx reload</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">$ /etc/init.d/nginx restart</span><br></pre></td></tr></table></figure>

<p>service 命令管理 nginx 服务</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">$ service nginx start</span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">$ service nginx stop</span><br><span class="line"><span class="comment"># 服务状态</span></span><br><span class="line">$ service nginx status</span><br><span class="line"><span class="comment"># 重载</span></span><br><span class="line">$ service nginx reload</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">$ service nginx restart</span><br></pre></td></tr></table></figure>

<p>systemctl 命令管理 nginx 服务</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列出所有 service 单元配置</span></span><br><span class="line">$ systemctl list-units --<span class="built_in">type</span>=service</span><br><span class="line"><span class="comment"># 查看nginx服务状态</span></span><br><span class="line">$ systemctl status nginx</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试配置文件</span></span><br><span class="line">$ nginx -t</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Tips</p>
<p>systemctl 命令是系统服务管理器指令，它实际上将 service 和 chkconfig 这两个命令组合到一起。</p>
</blockquote>
<h2 id="web-目录与-sites-enabled"><a href="#web-目录与-sites-enabled" class="headerlink" title="web 目录与 sites-enabled"></a>web 目录与 sites-enabled</h2><p>前面我们提到 web 存放目录是：&#x2F;var&#x2F;www，里面默认有一个 html 目录，在我们安装完 nginx 时直接再浏览器输入 ip 或域名，默认会到 80 端口，并展示一个 welcom to nginx 的界面，就是来自于&#x2F;var&#x2F;www&#x2F;html&#x2F;index.nginx-debian.html 这个文件。为什么会默认到这个文件，是在哪里配置的呢，打开&#x2F;etc&#x2F;nginx&#x2F;nginx.conf 主配置文件会发现在 http 内有这么一句代码：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line"><span class="attribute">include</span> /etc/nginx/sites-enabled/*;</span><br></pre></td></tr></table></figure>

<p>如果所有 server 配置都写在 nginx.conf 主配置文件中，难免会显得杂乱与臃肿。为了方便配置文件的维护，所以需要进行拆分配置，将低耦合高内聚贯彻到底。</p>
<p><code>include /etc/nginx/sites-enabled/</code> 的作用就是引入<code>/etc/nginx/sites-available/</code>下的所有 server 文件（有一个默认的<code>default</code>文件），其实 sites-enabled 下是 server 配置文件的<strong>软链接</strong>。而实际配置其实是在<code>/etc/nginx/sites-available/</code>下。</p>
<h2 id="sites-available-中自定义文件并部署项目"><a href="#sites-available-中自定义文件并部署项目" class="headerlink" title="sites-available 中自定义文件并部署项目"></a>sites-available 中自定义文件并部署项目</h2><p>如果我们要在 web7000 这个目录下部署多个 web 项目，web1,web2。让浏览器访问 localhost:7000&#x2F;web1 时响应 web1 的项目，访问 localhost:7000&#x2F;web2 时响应 web2 的项目。</p>
<p>切换到<code>/etc/nginx/sites-available</code>目录下，<code>ls</code>查看当前目录的配置，默认是有一个<strong>default 案例</strong>。将 default 复制一份，并起名为任意名字以.conf 结尾的文件，<strong>注意命名不要使用下划线符号<code>_</code>连接的方式，这可能导致文件执行无效。</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /etc/nginx</span><br><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">$ <span class="built_in">cd</span>  sites-available</span><br><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">$ <span class="built_in">cp</span> default web7000.conf</span><br><span class="line">$ vim web7000.conf</span><br></pre></td></tr></table></figure>

<p>web7000.conf 文件配置如下：</p>
<p><code>http://www.hautree.top</code>指向<code>http://ip:7000</code></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span> www.hautree.top</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">    	<span class="attribute">proxy_pass</span> http://localhost:7000;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">7000</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">7000</span>;</span><br><span class="line">  <span class="attribute">server_name</span> localhost;</span><br><span class="line">  <span class="comment"># 静态资源路径</span></span><br><span class="line">  <span class="attribute">root</span> /var/www/web7000;</span><br><span class="line">  <span class="comment"># 入口文件-首页</span></span><br><span class="line">  <span class="attribute">index</span> index.html;</span><br><span class="line"></span><br><span class="line">  <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Origin *;</span><br><span class="line">    <span class="comment"># root /var/www/web7000;</span></span><br><span class="line">    <span class="comment"># index index.html;</span></span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来保存退出，在 sites-enabled 目录下创建软连接</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /etc/nginx/sites-enabled</span><br><span class="line">$ <span class="built_in">ln</span> -s /etc/nginx/sites-available/web7000.conf</span><br></pre></td></tr></table></figure>

<p>然后再重启 nginx，让配置生效</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 优雅地重启nginx</span></span><br><span class="line"><span class="comment"># 如果要在更改配置后刷新nginx，最好最好重新加载服务。这将关闭旧进程，并使用新配置重新启动新进程。</span></span><br><span class="line">$ systemctl reload nginx</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ /etc/init.d/nginx reload</span><br><span class="line"><span class="comment"># 强制重启Nginx</span></span><br><span class="line"><span class="comment"># 对于主要配置更改，可以强制完全重新启动nginx。这将强制关闭整个服务和子流程，然后重新启动整个程序包。</span></span><br><span class="line">$ systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>在浏览器中输入<code>www.hautree.top</code>，则会显示我们放在&#x2F;var&#x2F;www&#x2F;web7000 下的 index.html 文件。这样就完成了一个基本的 web 项目部署。</p>
<h2 id="一个端口下部署多个项目"><a href="#一个端口下部署多个项目" class="headerlink" title="一个端口下部署多个项目"></a>一个端口下部署多个项目</h2><p>以上操作我们只能在 7000 端口下,&#x2F;var&#x2F;www&#x2F;web7000 目录下部署一个项目，如果要部署多个项目又该如何实现呢？例如浏览器输入 ip:7000&#x2F;web1 显示项目 web1,输入 ip:7000&#x2F;web2 显示项目 web2，我们的&#x2F;var&#x2F;www&#x2F;web7000 目录结构是这样</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+-- web7000</span><br><span class="line">  +-- web2</span><br><span class="line">  +-- web1</span><br></pre></td></tr></table></figure>

<p>更改<code>/etc/nginx/sites-available/web7000.conf</code>文件为：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span> www.hautree.top</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">      <span class="attribute">proxy_pass</span> http://localhost:7000;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">7000</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">7000</span>;</span><br><span class="line">  <span class="attribute">server_name</span> localhost;</span><br><span class="line">  <span class="comment"># 静态资源路径</span></span><br><span class="line">  <span class="attribute">root</span> /var/www/web7000;</span><br><span class="line">  <span class="comment"># 入口文件-首页</span></span><br><span class="line">  <span class="attribute">index</span> index.html;</span><br><span class="line"></span><br><span class="line">  <span class="section">location</span> /web2 &#123;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Origin *;</span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="section">location</span> /web1 &#123;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Origin *;</span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>location &#x3D; &#x2F;web1</strong>表示浏览器输入<code>www.huatree.top/web1</code>进入此规则，location &#x3D; web2 同理。</p>
<p><code>try_files $uri $uri/ =404</code>存在优先级，首先找 u r i 是 否 存 在 ， 不 存 在 响 应 404。</p>
<p><code>uri</code>又代表什么意思呢，浏览器输入<code>www.huatree.top/web2</code>， $uri 代表的就是&#x2F;web2 文件，注意是<strong>web2 文件</strong>（不是指目录）。</p>
<p><code>$uri/</code>代表的是**&#x2F;web2 目录**，如果存在则会结合 root 去找&#x2F;var&#x2F;www&#x2F;web7000&#x2F;web2 下的 index.html 并响应。</p>
<p>所以我们做了以上配置会发现浏览器中输入<code>www.huatree.top/web1</code>响应 404，输入<code>www.huatree.top/web2</code>才会响应对应 web2 项目下的 html 文件。</p>
<p>那是不是 try_files $uri 就没啥用了呢？</p>
<p>我们在浏览器端输入 ip:7000&#x2F;web1&#x2F;index.html 时， $uri 解析成了 web1&#x2F;index.html，所以这样时能访问的，利用这个特性，我们还可以访问 web1 下的其他资源，比如有一张 test.png 图片，则可 ip:7000&#x2F;web1&#x2F;test.png。</p>
<h2 id="一个端口下部署多个-Vue-项目"><a href="#一个端口下部署多个-Vue-项目" class="headerlink" title="一个端口下部署多个 Vue 项目"></a>一个端口下部署多个 Vue 项目</h2><p>场景：需要解决 CORS，接口地址通过 nginx 代理</p>
<h3 id="配置-vue-文件"><a href="#配置-vue-文件" class="headerlink" title="配置 vue 文件"></a>配置 vue 文件</h3><p>vue.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">publicPath</span>: <span class="string">&#x27;/web3&#x27;</span>, <span class="comment">// web4 ...</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://api.xxx.top&#x27;</span>, <span class="comment">// 接口地址</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>router&#x2F;index.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routerHistory = <span class="title function_">createWebHistory</span>(<span class="string">&#x27;/web3&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: routerHistory,</span><br><span class="line">  <span class="attr">routes</span>:constantRoutes</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打包</p>
<p>将打包生成的 dist 中的文件拷贝到&#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;h5.conf 中规定好的目录下</p>
<h3 id="配置-h5-conf"><a href="#配置-h5-conf" class="headerlink" title="配置 h5.conf"></a>配置 h5.conf</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cp</span> /etc/nginx/sites-available/default /etc/nginx/sites-available/h5.conf</span><br><span class="line">$ vim /etc/nginx/sites-available/h5.conf</span><br></pre></td></tr></table></figure>

<p>编辑 h5.conf 关键内容</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">server_name</span> h5.huatree.top;</span><br><span class="line"></span><br><span class="line">  <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://localhost:7001;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">7001</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">7001</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">server_name</span> localhost;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">root</span> /home/www/subapp;</span><br><span class="line">  <span class="attribute">index</span> index.html;</span><br><span class="line"></span><br><span class="line">  <span class="section">location</span> /web3 &#123;</span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment"># location /web4 &#123;</span></span><br><span class="line">  <span class="comment">#   try_files $uri $uri/ =404;</span></span><br><span class="line">  <span class="comment"># &#125;</span></span><br><span class="line">  <span class="section">location</span> /api &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://api.xxx.top/api;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment"># location /api2 &#123;</span></span><br><span class="line">  <span class="comment">#   proxy_pass http://api.xxx.top/api2;</span></span><br><span class="line">  <span class="comment"># &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="nginx-配置并默认跳转到-https"><a href="#nginx-配置并默认跳转到-https" class="headerlink" title="nginx 配置并默认跳转到 https"></a>nginx 配置并默认跳转到 https</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /etc/nginx/sites-available</span><br><span class="line">$ <span class="built_in">cp</span> default reverse-proxy.conf</span><br><span class="line">$ vim reverse-proxy.conf</span><br></pre></td></tr></table></figure>

<p>reverse-proxy.conf</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl;</span><br><span class="line">  <span class="comment"># 日志</span></span><br><span class="line">  <span class="attribute">access_log</span> /var/log/nginx/reverse-access.log;</span><br><span class="line">  <span class="attribute">error_log</span> /var/log/nginx/reverse-<span class="literal">error</span>.log;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 启用ssl功能（最新版本不需要配置，默认开启）</span></span><br><span class="line">  <span class="attribute">ssl</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 证书</span></span><br><span class="line">  <span class="attribute">ssl_certificate</span> /home/huatree/certs/huatree.top_bundle.pem;</span><br><span class="line">  <span class="attribute">ssl_certificate_key</span> /home/huatree/certs/huatree.top.key;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 会话、协议等</span></span><br><span class="line">  <span class="attribute">ssl_session_cache</span> shared:SSL:<span class="number">1m</span>;</span><br><span class="line">  <span class="attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span><br><span class="line">  <span class="attribute">ssl_session_timeout</span> <span class="number">10m</span>;</span><br><span class="line">  <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">  <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://localhost:7000;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>证书</strong>：这里的证书，可以去域名提供商那儿，申请免费的安全证书。了解更多，可详见<em>参考 6,7</em>，申请下载配置使用。</p>
<p>这里以一个端口下部署的单个项目为例，更改<code>/etc/nginx/sites-available/web7000.conf</code>文件为：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span> www.hautree.top</span><br><span class="line">  <span class="comment"># 重写</span></span><br><span class="line">  rewrite<span class="regexp"> ^(.*)</span> https://www.huatree.top <span class="literal">permanent</span>;</span><br><span class="line"></span><br><span class="line">  <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://localhost:7000;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">7000</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">7000</span>;</span><br><span class="line">  <span class="attribute">server_name</span> localhost;</span><br><span class="line">  <span class="comment"># 静态资源路径</span></span><br><span class="line">  <span class="attribute">root</span> /var/www/web7000;</span><br><span class="line">  <span class="comment"># 入口文件-首页</span></span><br><span class="line">  <span class="attribute">index</span> index.html;</span><br><span class="line"></span><br><span class="line">  <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Origin *;</span><br><span class="line">    <span class="comment"># root /var/www/web7000;</span></span><br><span class="line">    <span class="comment"># index index.html;</span></span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后，让配置生效</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查配置是否正常</span></span><br><span class="line">$ nginx -t</span><br><span class="line"><span class="comment"># 重载</span></span><br><span class="line">$ systemctl reload nginx</span><br><span class="line"><span class="comment"># 或者重启</span></span><br><span class="line">$ systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><p>[1] <a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-reference/ch03.zh-cn.html#_system_management_operations">debian &gt; 系统管理</a></p>
<p>[2] <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_34211761/article/details/91658441">Linux 下 systemctl 命令和 service、chkconfig 命令的区别</a></p>
<p>[3] <a target="_blank" rel="noopener" href="https://blog.csdn.net/cygdxcw/article/details/119988073">云服务器使用 nginx 部署 web 项目(ubuntu 操作系统)</a></p>
<p>[4] <a target="_blank" rel="noopener" href="https://www.cnblogs.com/jedi1995/p/10900224.html">nginx 配置选项 try_files 详解</a></p>
<p>[5] <a target="_blank" rel="noopener" href="https://pangruitao.com/post/2106">Debian 下用 Nginx 反向代理 http 为 https</a></p>
<p>[6] <a target="_blank" rel="noopener" href="https://www.freesion.com/article/3461470003/">DEBIAN8 NGINX 添加阿里云 SSL 证书，配置 HTTPS</a></p>
<p>[7] <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38667427/article/details/125414631">Nginx|Tomcat 配置 https</a></p>
<p>[8] <a target="_blank" rel="noopener" href="https://www.cnblogs.com/beheTea/p/16261345.html">nginx 一个端口部署多个 vue 项目</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpg" alt="醉梦 微信">
        <span>微信</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>醉梦
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://www.huatree.top/2022/08/27/20220827-%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BD%BF%E7%94%A8nginx%E9%83%A8%E7%BD%B2web%E9%A1%B9%E7%9B%AE/" title="云服务器使用nginx部署web项目">https://www.huatree.top/2022/08/27/20220827-云服务器使用nginx部署web项目/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
        <a target="_blank" class="social-link" href="/images/wechat_channel.jpg">
          <span class="icon">
            <i class="fab fa-weixin"></i>
          </span>

          <span class="label">WeChat</span>
        </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/nginx/" rel="tag"># nginx</a>
              <a href="/tags/%E9%83%A8%E7%BD%B2/" rel="tag"># 部署</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/08/27/20220827-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E8%BD%AF%E4%BB%B6/" rel="prev" title="内网穿透软件">
                  <i class="fa fa-chevron-left"></i> 内网穿透软件
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/08/29/20220829-%E4%BD%A0%E4%B8%8D%E6%95%A2%E8%B0%88%E6%81%8B%E7%88%B1%E7%9A%84%E5%8E%9F%E5%9B%A0%EF%BC%8C%E6%98%AF%E8%BF%99%E4%BA%9B%E4%B9%88/" rel="next" title="你不敢谈恋爱的原因，是这些么">
                  你不敢谈恋爱的原因，是这些么 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">蜀ICP备2022016364号-1 </a>
  </div>

<div class="copyright">
  &copy; 2021 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">醉梦</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">359k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">5:26</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script src="https://unpkg.com/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://unpkg.com/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<link rel="stylesheet" href="https://unpkg.com/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"huatree","repo":"huatree.gitalk.io","client_id":"f058094b28cadc38c8bf","client_secret":"b5259994ff1994db4b3b6124a3fe83fe2e0e9711","admin_user":"huatree","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","id":"location.pathname","js":{"url":"https://unpkg.com/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"bd8d02ef100bd34a55bbab8ad50d070e"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
